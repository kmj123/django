<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css"> 
  <title>ê´€ë¦¬ì | ê²Œì‹œê¸€ê´€ë¦¬</title>
  <style>
   *{margin : 0; padding : 0;  box-sizing : border-box;}
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .banner{
            width : 1000px;
            height : 70px;
            background :rgba(255, 255, 255, 0.95);
            border-radius : 20px;
            display : flex;
            align-items: center;
            justify-content: space-between;
            margin-top:5px;
            padding : 0 25px;

        }
        .banner h2{ 
            font-size : 30px; 
            color : #7E6EB0;
            align-items : center; 
            margin-left: 15px;
        }
        .banner-center {
            display: flex;
            align-items: center;
        }
        .banner-right {
            display: flex;
            align-items: center;
        }
        .table{display : flex;
            margin-top : 15px;}
        .menu {
            display: flex;
            align-items: center;
        }
        .menu ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 10px;
        }
        .menu li{
            display : flex;
            text-align : center;
            align-items : center;
            justify-content: center;
            padding: 0 15px;
            font-weight : 500;
            width : 115px;
            height : 40px;
            border-radius : 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            color : #764ba2;
            border : 2px solid  #764ba2;
        }
        .menu li a{color : #764ba2;}
        .menu .board{
            background : linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color : rgba(255, 255, 255, 0.95);
            border : none;
        }
        .menu li.board a {
          color: rgba(255, 255, 255, 0.95); 
        }
        .home {
            all: unset;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #7E6EB0;
            padding: 10px 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .home:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .home i {
            font-size: 16px;
            display: flex;
            align-items: center;
        }
        .notice{
            width : 100%;
            height : 800px;
            background : white;
            border-radius : 25px;
            background : rgba(255, 255, 255, 0.95);
        }
        .dash-top{height : 80px; width : 860px; text-align : center;
                margin : 30px 40px 0 70px;font-size : 16px;}
        .dash-top hr{ color : rgba(219, 213, 213, 0.63); margin-top : 15px;}
        .box{display : flex; }
        .box div { display : flex;
                    position: relative;
                    left: 36px;
                    flex-direction: column; 
                    justify-content: center; 
                    align-items: center;     
                    width : 250px;
                    height : 120px;
                    background : white;
                    border-radius : 15px;
                    margin : 10px 0 auto;
                    margin-left : 45px;
                   box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);}
        .box p{ color : #667EEA; font-size : 35px; font-weight : 700;}
        .box a{ color : #666666; font-size : 15px;font-weight : 500;}
        .notice h3{font-size : 25px; margin : 20px; padding-left : 25px;}
    .filter {
      position: relative;
      margin: 25px auto 0 auto;
      width: 850px;
      height: 80px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .filt {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      gap: 10px;
    }
    .filter select {
      width: 100px;
      height: 35px;
      border-radius: 10px;
    }
    .filter .search {
      width: 500px;
      height: 35px;
      border-radius: 10px;
      border: 2px solid #ccc;
      outline: none;
      padding-left : 12px;
    }
    .filter .searchBtn {
      height: 35px;
      width: 45px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    input[type="text"]:focus {
      border: 2px solid black;
    }

    .table-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 40px 10px 40px;
    }

    .table-controls h3 {
      color: #666;
      font-size: 16px;
      font-weight: 500;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      position: relative;
      margin-right : 35px;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 8px;
      overflow: hidden;
    }

    .action-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s ease;
    }

    .action-btn:hover::before {
      left: 100%;
    }

    .btn-delete {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color: white;
    }

    .btn-delete:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
    }

    .btn-delete:active {
      transform: translateY(0);
    }

    .btn-delete::after {
      content: 'ğŸ—‘ï¸';
      font-size: 16px;
    }

    table {
      width: 85%;
      margin: 0 auto;
      border-collapse: collapse;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      text-align: center;
    }
    thead {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: rgba(245, 246, 250, 0.95);
    }
    th, td {
      padding: 13px;
      text-align: center;
      border-bottom: 1px solid #f0f0f0;
    }

    table tr:last-child td {
      border-bottom: none;
    }

    .bottom-bar {
      margin: 10px auto 0 auto;
      padding: 10px;
      width: 85%;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: center;
    }

    .pagination {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .pagination a,
    .pagination strong {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 35px;
      height: 35px;
      text-decoration: none;
      color: #666;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .pagination strong {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 600;
    }

    .pagination a:hover {
      background: #f0f0f0;
    }

    a { text-decoration: none; color: #333; }

    .selected-count {
      color: #667eea;
      font-weight: 600;
    }

    .btn-delete:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .btn-delete:disabled:hover {
      transform: none;
      box-shadow: none;
    }
    a{text-decoration : none;}
  </style>
</head>
<body>
  <div>
    <div class="banner">
      <a href = "{% url 'home:main' %}"><h2>PO-PIN</h2></a>
      <div class = "menu">
                <ul>
                    <li><a href="{% url 'adpage:main' %}">ë©”ì¸</a></li>
                    <li><a href="{% url 'adpage:notice' %}">ê³µì§€ì‚¬í•­</a></li>
                    <li class="board"><a href="{% url 'adpage:post' %}">ê²Œì‹œê¸€ ê´€ë¦¬</a></li>
                    <li><a href="{% url 'adpage:user' %}">ì‚¬ìš©ì ê´€ë¦¬</a></li>
                </ul>
            </div>
            <div class="banner-right">
                <a href="{% url 'home:main' %}" class="home">
                    <i class="fi fi-rr-home"></i>í™ˆìœ¼ë¡œ
                </a>
            </div>
    </div>
    <div class="table">
      <div class="notice">
        <div class="dash-top">
          <h2>ê²Œì‹œê¸€ ê´€ë¦¬</h2>
          <hr>
        </div>
        <div class="box">
          <div><p>1,234</p><a>ì „ì²´ ê²Œì‹œê¸€</a></div>
          <div><p>5,678</p><a>ì‹ ê³ ëœ ê²Œì‹œê¸€</a></div>
          <div><p>12</p><a>ì˜¤ëŠ˜ ì‘ì„±</a></div>
        </div>

        <div class="filter">
          <div class="filt">
            <select>
              <option value="">ì „ì²´ ê²Œì‹œíŒ</option>
              <option value="êµí™˜í›„ê¸°">êµí™˜í›„ê¸°</option>
              <option value="ë‚˜ëˆ”">ë‚˜ëˆ”</option>
              <option value="ëŒ€ë¦¬êµ¬ë§¤">ëŒ€ë¦¬êµ¬ë§¤</option>
              <option value="í˜„í™©ê³µìœ ">í˜„í™©ê³µìœ </option>
              <option value="ë™í–‰">ë™í–‰</option>
            </select>
            <select class="state">
              <option value="">ê²Œì‹œê¸€ ìƒíƒœ</option>
              <option>ì •ìƒ</option>
              <option>ëŒ€ê¸°</option>
              <option>ì‚­ì œ</option>
            </select>
            <input type="text" class="search" placeholder="ê²Œì‹œê¸€ ì œëª©, ì‘ì„±ì ê²€ìƒ‰...">
            <input type="button" class="searchBtn" value="ê²€ìƒ‰">
          </div>
        </div>

        <div class="table-controls">
          <h3>ì„ íƒëœ ê²Œì‹œê¸€ì„ ê´€ë¦¬í•˜ì„¸ìš” <span class="selected-count" id="selectedCount">(0ê°œ ì„ íƒë¨)</span></h3>
          <div class="action-buttons">
            <button class="action-btn btn-delete" id="deleteBtn" disabled>ì„ íƒ ì‚­ì œ</button>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th><input type="checkbox" id="selectAll"></th>
              <th>ê²Œì‹œê¸€ ID</th>
              <th>ê²Œì‹œíŒ</th>
              <th>ì œëª©</th>
              <th>ì‘ì„±ì</th>
              <th>ì‘ì„±ì¼</th>
              <th>ì‹ ê³ ìˆ˜</th>
              <th>ìƒíƒœ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="checkbox" class="row-checkbox"></td>
              <td>abcdefg</td>
              <td>êµí™˜í›„ê¸°</td>
              <td><a href="{% url 'adpage:postV' %}">ã…‡ã…‡ë‹˜ê³¼ êµí™˜í›„ê¸°</a></td>
              <td>ã…ã…</td>
              <td>2025-06-25</td>
              <td>3</td>
              <td>ëŒ€ê¸°</td>
            </tr>
            <tr>
              <td><input type="checkbox" class="row-checkbox"></td>
              <td>gijklmnop</td>
              <td>ë™í–‰</td>
              <td><a href="{% url 'adpage:postV' %}">ã…‡ã…‡ì½˜ ë™í–‰êµ¬í•´ìš”</a></td>
              <td>ã…ã„´ã…‡ã„¹</td>
              <td>2025-06-25</td>
              <td>0</td>
              <td>ì •ìƒ</td>
            </tr>
            <tr>
              <td><input type="checkbox" class="row-checkbox"></td>
              <td>giop</td>
              <td>ë™í–‰</td>
              <td><a href="{% url 'adpage:postV' %}">ã…‡ã…‡ì½˜ ë™í–‰êµ¬í•´ìš”</a></td>
              <td>ã…ã„´ã…‡ã„¹</td>
              <td>2025-06-25</td>
              <td>0</td>
              <td>ì •ìƒ</td>
            </tr>
            <tr>
              <td><input type="checkbox" class="row-checkbox"></td>
              <td>gip</td>
              <td>ë™í–‰</td>
              <td><a href="{% url 'adpage:postV' %}">ã…‡ã…‡ì½˜ ë™í–‰êµ¬í•´ìš”</a></td>
              <td>ã…ã„´ã…‡ã„¹</td>
              <td>2025-06-25</td>
              <td>0</td>
              <td>ì •ìƒ</td>
            </tr>
            <tr>
              <td><input type="checkbox" class="row-checkbox"></td>
              <td>gop</td>
              <td>ë™í–‰</td>
              <td><a href="{% url 'adpage:postV' %}">ã…‡ã…‡ì½˜ ë™í–‰êµ¬í•´ìš”</a></td>
              <td>ã…ã„´ã…‡ã„¹</td>
              <td>2025-06-25</td>
              <td>0</td>
              <td>ì •ìƒ</td>
            </tr>
          </tbody>
        </table>

        <div class="bottom-bar">
          <div class="pagination">
            <a href="#">Â«</a>
            <a href="#">â€¹</a>
            <strong>1</strong>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#">4</a>
            <a href="#">5</a>
            <a href="#">â€º</a>
            <a href="#">Â»</a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // ëª¨ë“  ë©”ë‰´ li ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const menuItems = document.querySelectorAll('.menu ul li');

    menuItems.forEach(item => {
        item.addEventListener('click', () => {
        // ë¨¼ì € ëª¨ë“  liì—ì„œ 'board' í´ë˜ìŠ¤ ì œê±°
        menuItems.forEach(i => i.classList.remove('board'));
        // í´ë¦­í•œ í•­ëª©ì—ë§Œ 'board' í´ë˜ìŠ¤ ì¶”ê°€
        item.classList.add('board');
        });
    });

    // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ê¸°ëŠ¥
    const selectAllCheckbox = document.getElementById('selectAll');
    const rowCheckboxes = document.querySelectorAll('.row-checkbox');
    const selectedCount = document.getElementById('selectedCount');
    const deleteBtn = document.getElementById('deleteBtn');

    // ì„ íƒëœ ê°œìˆ˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateSelectedCount() {
      const checkedBoxes = document.querySelectorAll('.row-checkbox:checked');
      const count = checkedBoxes.length;
      
      selectedCount.textContent = `(${count}ê°œ ì„ íƒë¨)`;
      
      // ì‚­ì œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
      if (count > 0) {
        deleteBtn.disabled = false;
      } else {
        deleteBtn.disabled = true;
      }
      
      // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ìƒíƒœ ì—…ë°ì´íŠ¸
      if (count === 0) {
        selectAllCheckbox.indeterminate = false;
        selectAllCheckbox.checked = false;
      } else if (count === rowCheckboxes.length) {
        selectAllCheckbox.indeterminate = false;
        selectAllCheckbox.checked = true;
      } else {
        selectAllCheckbox.indeterminate = true;
      }
    }

    // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
    selectAllCheckbox.addEventListener('change', function() {
      const isChecked = this.checked;
      rowCheckboxes.forEach(checkbox => {
        checkbox.checked = isChecked;
      });
      updateSelectedCount();
    });

    // ê°œë³„ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
    rowCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', updateSelectedCount);
    });

    // ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    deleteBtn.addEventListener('click', function() {
      const checkedBoxes = document.querySelectorAll('.row-checkbox:checked');
      const count = checkedBoxes.length;
      
      if (count > 0) {
        const confirmed = confirm(`ì„ íƒëœ ${count}ê°œì˜ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
        if (confirmed) {
          checkedBoxes.forEach(checkbox => {
            const row = checkbox.closest('tr');
            row.remove();
          });
          updateSelectedCount();
          alert(`${count}ê°œì˜ ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }
      }
    });

    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    updateSelectedCount();

  document.addEventListener("DOMContentLoaded", () => {
  const selectBoard = document.querySelector(".filter select:nth-child(1)");
  const selectState = document.querySelector(".filter select.state");
  const searchInput = document.querySelector(".filter .search");
  const searchBtn = document.querySelector(".filter .searchBtn");

  const tbody = document.querySelector("tbody");
  const allRows = Array.from(tbody.querySelectorAll("tr"));

  let filteredRows = allRows;
  let currentPage = 1;
  const itemsPerPage = 4;

  // í•„í„° ë° ê²€ìƒ‰ ì¡°ê±´ì— ë§ê²Œ í–‰ í•„í„°ë§
  function filterRows() {
    const boardFilter = selectBoard.value.trim();
    const stateFilter = selectState.value.trim();
    const keyword = searchInput.value.trim().toLowerCase();

    filteredRows = allRows.filter(row => {
      const cells = row.querySelectorAll("td");
      const boardText = cells[2].textContent.trim();
      const titleText = cells[3].textContent.trim().toLowerCase();
      const authorText = cells[4].textContent.trim().toLowerCase();
      const contentText = ""; // ê²Œì‹œê¸€ ë‚´ìš©ì´ í…Œì´ë¸”ì— ì—†ìœ¼ë©´ ì œì™¸
      const stateText = cells[7].textContent.trim();

      // ê²Œì‹œíŒ í•„í„° (ë¹ˆ ê°’ì´ë©´ ì „ì²´)
      const boardMatch = !boardFilter || boardFilter === "" || boardText === boardFilter;

      // ìƒíƒœ í•„í„° (ë¹ˆ ê°’ì´ë©´ ì „ì²´)
      const stateMatch = !stateFilter || stateFilter === "" || stateText === stateFilter;

      // ê²€ìƒ‰ì–´ê°€ ì œëª©, ì‘ì„±ìì— í¬í•¨ë˜ëŠ”ì§€
      const keywordMatch =
        keyword === "" ||
        titleText.includes(keyword) ||
        authorText.includes(keyword) 
      return boardMatch && stateMatch && keywordMatch;
    });

    currentPage = 1; // í•„í„°ë§í•  ë•Œ í•­ìƒ 1í˜ì´ì§€ë¶€í„° ë³´ì—¬ì£¼ê¸°
    updateTable();
  }

  // í…Œì´ë¸”ì— í˜„ì¬ í˜ì´ì§€ì— ë§ëŠ” í–‰ë§Œ ë³´ì—¬ì£¼ê¸°
  function updateTable() {
    // ì „ì²´ í–‰ ìˆ¨ê¸°ê¸°
    allRows.forEach(row => (row.style.display = "none"));

    // í˜„ì¬ í˜ì´ì§€ì— ë§ëŠ” í–‰ë§Œ í‘œì‹œ
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const pageRows = filteredRows.slice(startIndex, endIndex);

    pageRows.forEach(row => (row.style.display = ""));

    updatePagination();
    updateSelectedCount(); // ì²´í¬ë°•ìŠ¤ ì„ íƒ ê°œìˆ˜ ì´ˆê¸°í™”
  }

  // í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸
  function updatePagination() {
    const pagination = document.querySelector(".pagination");
    pagination.innerHTML = "";

    const totalPages = Math.ceil(filteredRows.length / itemsPerPage);
    if (totalPages === 0) {
      pagination.textContent = "ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";
      return;
    }

    function createButton(label, clickHandler) {
      const a = document.createElement("a");
      a.href = "#";
      a.textContent = label;
      a.style.margin = "0 5px";
      a.addEventListener("click", function (e) {
        e.preventDefault();
        clickHandler();
      });
      return a;
    }

    // ì²«, ì´ì „ ë²„íŠ¼
    pagination.appendChild(createButton("Â«", () => showPage(1)));
    pagination.appendChild(createButton("â€¹", () => {
      if (currentPage > 1) showPage(currentPage - 1);
    }));

    const maxVisiblePages = 5;
    let startPage, endPage;
    if (totalPages <= maxVisiblePages) {
      startPage = 1;
      endPage = totalPages;
    } else {
      const half = Math.floor(maxVisiblePages / 2);
      if (currentPage <= half) {
        startPage = 1;
        endPage = maxVisiblePages;
      } else if (currentPage + half >= totalPages) {
        startPage = totalPages - maxVisiblePages + 1;
        endPage = totalPages;
      } else {
        startPage = currentPage - half;
        endPage = currentPage + half;
        if (maxVisiblePages % 2 === 0) endPage--;
      }
    }

    for (let i = startPage; i <= endPage; i++) {
      if (i === currentPage) {
        const strong = document.createElement("strong");
        strong.textContent = i;
        pagination.appendChild(strong);
      } else {
        pagination.appendChild(createButton(i, () => showPage(i)));
      }
    }

    // ë‹¤ìŒ, ë§ˆì§€ë§‰ ë²„íŠ¼
    pagination.appendChild(createButton("â€º", () => {
      if (currentPage < totalPages) showPage(currentPage + 1);
    }));
    pagination.appendChild(createButton("Â»", () => showPage(totalPages)));
  }

  function showPage(pageNumber) {
    currentPage = pageNumber;
    updateTable();
  }

  // ì²´í¬ë°•ìŠ¤ ê´€ë ¨ - ì„ íƒ ê°œìˆ˜ ì—…ë°ì´íŠ¸
  const selectAllCheckbox = document.getElementById('selectAll');
  const deleteBtn = document.getElementById('deleteBtn');
  const selectedCount = document.getElementById('selectedCount');

  function updateSelectedCount() {
    // í•„í„°ë§ ëœ í˜ì´ì§€ì— í‘œì‹œëœ ì²´í¬ë°•ìŠ¤ë§Œ ê³ ë ¤
    const visibleCheckboxes = filteredRows
      .slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)
      .map(row => row.querySelector('.row-checkbox'));

    const checkedBoxes = visibleCheckboxes.filter(cb => cb.checked);
    const count = checkedBoxes.length;

    selectedCount.textContent = `(${count}ê°œ ì„ íƒë¨)`;
    deleteBtn.disabled = count === 0;

    // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ìƒíƒœ
    if (count === 0) {
      selectAllCheckbox.indeterminate = false;
      selectAllCheckbox.checked = false;
    } else if (count === visibleCheckboxes.length) {
      selectAllCheckbox.indeterminate = false;
      selectAllCheckbox.checked = true;
    } else {
      selectAllCheckbox.indeterminate = true;
    }
  }

  // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ (í˜„ì¬ í˜ì´ì§€ë§Œ ì„ íƒ)
  selectAllCheckbox.addEventListener('change', function () {
    const visibleCheckboxes = filteredRows
      .slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)
      .map(row => row.querySelector('.row-checkbox'));

    visibleCheckboxes.forEach(cb => cb.checked = this.checked);
    updateSelectedCount();
  });

  // ê°œë³„ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ (í˜„ì¬ í˜ì´ì§€)
  function addCheckboxListeners() {
    filteredRows.forEach(row => {
      const cb = row.querySelector('.row-checkbox');
      if (cb) {
        cb.addEventListener('change', updateSelectedCount);
      }
    });
  }

  // ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (í˜„ì¬ í˜ì´ì§€ì—ì„œ ì„ íƒëœ ê²ƒë§Œ ì‚­ì œ)
  deleteBtn.addEventListener('click', () => {
    const visibleCheckboxes = filteredRows
      .slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)
      .map(row => row.querySelector('.row-checkbox'))
      .filter(cb => cb.checked);

    if (visibleCheckboxes.length === 0) return;

    if (confirm(`ì„ íƒëœ ${visibleCheckboxes.length}ê°œì˜ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
      visibleCheckboxes.forEach(cb => {
        const row = cb.closest('tr');
        row.remove();
        // ì›ë³¸ ë°°ì—´(allRows)ì—ì„œë„ ì œê±°
        const indexAll = allRows.indexOf(row);
        if (indexAll > -1) allRows.splice(indexAll, 1);
      });

      // ë‹¤ì‹œ í•„í„°ë§ í›„ í…Œì´ë¸” ê°±ì‹ 
      filterRows();
      alert(`${visibleCheckboxes.length}ê°œì˜ ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }
  });

  // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ì‹œ í•„í„°ë§ ì‹¤í–‰
  searchBtn.addEventListener('click', filterRows);

  // í•„í„° ì…€ë ‰íŠ¸ ë°”ë€” ë•Œë„ í•„í„°ë§ ì‹¤í–‰
  selectBoard.addEventListener('change', filterRows);
  selectState.addEventListener('change', filterRows);

  searchInput.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    filterRows();
  }
  });

  // ì´ˆê¸° ì…‹ì—…
  addCheckboxListeners();
  filterRows();
});

  </script>
</body>
</html>