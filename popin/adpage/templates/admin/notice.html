<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css"> 
    <title>관리자 | 공지사항</title>
    <style>
        *{margin : 0; padding : 0;  box-sizing : border-box;}
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .banner{
            width : 1000px;
            height : 70px;
            background :rgba(255, 255, 255, 0.95);
            border-radius : 20px;
            display : flex;
            align-items: center;
            margin-top : 5px;
            justify-content: space-between;
            padding: 0 25px;
        }
        .banner h2{ 
            font-size : 30px; 
            color : #7E6EB0;
            align-items : center; 
            margin-left: 15px;
        }
        .banner-center {
            display: flex;
            align-items: center;
        }
        .banner-right {
            display: flex;
            align-items: center;
        }
        .table{display : flex;
            margin-top : 15px;}
        .menu {
            display: flex;
            align-items: center;
        }
        .menu ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 10px;
        }
        .menu li{
            display : flex;
            text-align : center;
            align-items : center;
            justify-content: center;
            padding: 0 15px;
            font-weight : 500;
            width : 115px;
            height : 40px;
            border-radius : 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            color : #764ba2;
            border : 2px solid  #764ba2;
        }
        .menu li a{color : #764ba2;}
        .menu .board{
            background : linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color : rgba(255, 255, 255, 0.95);
            border : none;
        }
        .menu .board a {color : rgba(255, 255, 255, 0.95);}
        .home {
            all: unset;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #7E6EB0;
            padding: 10px 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .home:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .home i {
            font-size: 16px;
            display: flex;
            align-items: center;
        }
        .notice{
            width : 100%;
            height : 800px;
            background : white;
            border-radius : 25px;
            background : rgba(255, 255, 255, 0.95);
        }
        .dash-top{height : 80px; width : 860px; text-align : center;
                margin : 30px 40px 0 70px;font-size : 16px;}
        .dash-top hr{ color : rgba(219, 213, 213, 0.63); margin-top : 15px;}
        .box{display : flex;}
        .box div { display : flex;
                    flex-direction: column; 
                    justify-content: center; 
                    align-items: center;     
                    width : 180px;
                    height : 180px;
                    background : white;
                    border-radius : 15px;
                    margin : 10px 0 auto;
                    margin-left : 45px;}
        .box p{ color : #667EEA; font-size : 35px; font-weight : 700;}
        .box a{ color : #666666; font-size : 15px;font-weight : 500;}
        .notice h3{font-size : 25px; margin : 20px; padding-left : 25px;}
        table {
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border-collapse: collapse; border: none
                margin-top: 15px;
                width: 80%;
                text-align: center;
                min-height : 60px;
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                margin: 15px auto 0 auto; 
                border-collapse: collapse;
                }

                thead {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: rgba(245, 246, 250, 0.95);
                }

                tbody {
                font-weight: 400;
                }

                th {
                padding: 13px;
                text-align: center;
                vertical-align: middle;
                border: none; 
                }

                td {
                padding: 13px;
                text-align: center;
                vertical-align: middle;
                border-bottom: 1px solid #f0f0f0;
                }

                tbody tr:last-child td {
                border-bottom: none;
                }
            button{ width : 150px; height : 40px; margin-left : 750px; cursor : pointer;
            margin-bottom : 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color : white;
            border-radius : 10px; border: none;}
            a{text-decoration : none; color : #333333;}

            .pagination {
            margin-top : 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            }

            .pagination a,
            .pagination strong {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            text-decoration: none;
            color: #666;
            border-radius: 8px;
            transition: all 0.3s ease;
            }

            .pagination strong {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            }

            .pagination a:hover {
            background: #f0f0f0;
            }

    </style>
</head>
<body>
    <div>
        <div class = "banner">
            <a href = "{% url 'home:main' %}"><h2>PO-PIN</h2></a>
            <div class = "menu">
                <ul>
                    <li><a href="{% url 'adpage:main' %}">메인</a></li>
                    <li class = "board"><a href="{% url 'adpage:notice' %}">공지사항</a></li>
                    <li><a href="{% url 'adpage:post' %}">게시글 관리</a></li>
                    <li><a href="{% url 'adpage:user' %}">사용자 관리</a></li>
                </ul>
            </div>
            <div class="banner-right">
                <a href="{% url 'home:main' %}" class="home">
                    <i class="fi fi-rr-home"></i>홈으로
                </a>
            </div>
        </div>
        <div class = "table">
            <div class = "notice">
                <div class = "dash-top">
                    <h2>공지사항</h2>
                    <hr>
                </div>
                <table>
                    <colgroup>
                        <col style="width: *;">
                        <col style="width: 25%;">
                        <col style="width: 15%;">
                    </colgroup>
                    <thead>
                        <tr style = "height : 60px;">
                            <th>제목</th>
                            <th>등록일</th>
                            <th>조회수</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for notice in notice_list %}
                        <tr>
                            <td><a href = "/adpage/noticeV/{{notice.id}}/">{{notice.title}}</a></td>
                            <td>{{ notice.created_at|date:"Y-m-d" }}</td>
                            <td>{{notice.views}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div class="bottom-bar">
                <div class="pagination">
                    <a href="#">«</a>
                    <a href="#">‹</a>
                    <strong>1</strong>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">4</a>
                    <a href="#">5</a>
                    <a href="#">›</a>
                    <a href="#">»</a>
                </div>
                </div>
                <a href = "{% url 'adpage:noticeW' %}"><button type = "button" name = "write" >게시글 작성하기</button></a>
            </div>
        </div>
    </div>
    </body>
<script>
    // 페이지네이션
  let currentPage = 1;
  const itemsPerPage = 10;
  let filteredCards = [];

  function showPage(pageNumber) {
    currentPage = pageNumber;
    hideAllCards();
    showCurrentPageCards();
    updatePageButtons();
  }

  function hideAllCards() {
    filteredCards.forEach(card => card.style.display = "none");
  }

  function showCurrentPageCards() {
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const cardsToShow = filteredCards.slice(startIndex, endIndex);
    cardsToShow.forEach(card => card.style.display = "");
  }

  function updatePageButtons() {
  const pagination = document.querySelector(".pagination");
  pagination.innerHTML = "";

  const totalPages = Math.ceil(filteredCards.length / itemsPerPage);

  // << 첫 페이지
  const firstBtn = createButton("«", () => showPage(1));
  const prevBtn = createButton("‹", () => {
    if (currentPage > 1) showPage(currentPage - 1);
  });
  pagination.appendChild(firstBtn);
  pagination.appendChild(prevBtn);

  // 고정된 최대 페이지 수
  const maxVisiblePages = 5;

  let startPage, endPage;
  if (totalPages <= maxVisiblePages) {
    startPage = 1;
    endPage = totalPages;
  } else {
    const half = Math.floor(maxVisiblePages / 2);
    if (currentPage <= half) {
      startPage = 1;
      endPage = maxVisiblePages;
    } else if (currentPage + half >= totalPages) {
      startPage = totalPages - maxVisiblePages + 1;
      endPage = totalPages;
    } else {
      startPage = currentPage - half;
      endPage = currentPage + half;
      if (maxVisiblePages % 2 === 0) endPage--; // 짝수일 경우 조정
    }
  }

  for (let i = startPage; i <= endPage; i++) {
    if (i === currentPage) {
      const strong = document.createElement("strong");
      strong.textContent = i;
      pagination.appendChild(strong);
    } else {
      const btn = createButton(i, () => showPage(i));
      pagination.appendChild(btn);
    }
  }

  const nextBtn = createButton("›", () => {
    if (currentPage < totalPages) showPage(currentPage + 1);
  });
  const lastBtn = createButton("»", () => showPage(totalPages));
  pagination.appendChild(nextBtn);
  pagination.appendChild(lastBtn);
}


  function createButton(label, clickHandler) {
    const a = document.createElement("a");
    a.href = "#";
    a.textContent = label;
    a.style.margin = "0 5px";
    a.addEventListener("click", function (e) {
      e.preventDefault();
      clickHandler();
    });
    return a;
  }

  document.addEventListener("DOMContentLoaded", () => {
    // tbody tr만 선택
    filteredCards = Array.from(document.querySelectorAll("tbody tr"));
    showPage(1);
  });
</script>
</html>